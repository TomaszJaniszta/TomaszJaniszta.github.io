let play,start=0,started=!1,time=0;class BallGenerator{constructor(t){this.board=t}generateBall(){let e,l;for(let t=0;t<board.length;t++){var n=board[t].indexOf("1");-1<n&&(e=t,l=n)}return{y:e,x:l}}}class Vector{constructor(t,e){this.x=e*this.randomVector(),this.y=t*this.randomVector()}randomVector(){return Math.random()<.5?-1:1}}class Ball{constructor(t,e,l){this.x=e,this.y=t,this.vector=l}move(){this.x+=this.vector.x,this.y+=this.vector.y}}class Game{constructor(t,e){this.ball=t,this.board=e,this.startingX=Number(t.x),this.startingY=Number(t.y)}randomVector=()=>Math.random()<.5?this.ball.vector.x*=-1:this.ball.vector.y*=-1;checkForYCollision=()=>{this.moveBall(),this.randomVector()};checkForXCollision=()=>{"X"!==this.board[this.ball.y][this.ball.x+this.ball.vector.x]&&"X"!==this.board[this.ball.y+this.ball.vector.y][this.ball.x]&&this.randomVector(),"X"===this.board[this.ball.y][this.ball.x+this.ball.vector.x]&&(this.ball.vector.x*=-1),"X"===this.board[this.ball.y+this.ball.vector.y][this.ball.x]&&(this.ball.vector.y*=-1),this.moveBall()};moveBall=()=>{this.board[this.ball.y][this.ball.x]="0",this.board[this.ball.y+this.ball.vector.y][this.ball.x+this.ball.vector.x]="1",this.ball.move()};start(){play=setInterval(()=>{"Y"===this.board[this.ball.y+this.ball.vector.y][this.ball.x+this.ball.vector.x]?this.checkForYCollision():"X"===this.board[this.ball.y+this.ball.vector.y][this.ball.x+this.ball.vector.x]?this.checkForXCollision():this.moveBall(),setTime(time+=1),updateBoard(),this.ball.x===this.startingX&&this.ball.y===this.startingY&&(clearInterval(play),alert("Game done!"),console.log("Game over"),window.location.reload())},1e3)}}let startBall=new BallGenerator(board).generateBall(),myVector=new Vector(1,1),movingBall=new Ball(startBall.y,startBall.x,myVector),game=new Game(movingBall,board),timeBall2=document.getElementById("timeBall2");gameReset=()=>{clearInterval(play),window.location.reload()},handleButtonDown=()=>{console.log("Button pressed"),start<1?(game.start(),console.log("started"),start+=1,started=!started,"Start"===ball2button.innerHTML?ball2button.innerHTML="Stop":ball2button.innerHTML="Start"):(--start,started=!started,"Start"===ball2button.innerHTML?ball2button.innerHTML="Stop":ball2button.innerHTML="Start",clearInterval(play))};const updateBoard=()=>{timeBall2.innerHTML=time;let l=0,n=document.getElementById("boardContainer");board.map(t=>{l++;let e=document.createElement("div");e.setAttribute("id","divRow"+l),n.appendChild(e),t.map(t=>{if("X"===t){let t=document.createElement("span"),e=(t.innerHTML="C",t.setAttribute("class","Wall"),document.getElementById("divRow"+l));e.appendChild(t)}else if("1"===t){let t=document.createElement("span"),e=(t.innerHTML="y",t.setAttribute("id","ball"),started?t.setAttribute("class","BallRunning"):t.setAttribute("class","Ball"),document.getElementById("divRow"+l));e.appendChild(t)}else if("0"===t){let t=document.createElement("span"),e=(t.innerHTML="c",t.setAttribute("class","Air"),document.getElementById("divRow"+l));e.appendChild(t)}else if("Y"===t){let t=document.createElement("span"),e=(t.innerHTML="s",t.setAttribute("class","y"),document.getElementById("divRow"+l));e.appendChild(t)}}),n.appendChild(e)})};let board=[["X","X","X","X","X","X","X","X","X","X","X","X"],["X","0","0","X","X","X","X","X","X","X","X","X"],["X","0","0","0","X","X","X","X","X","X","X","X"],["X","0","0","0","Y","X","X","X","X","X","X","X"],["X","0","0","0","0","0","X","X","X","X","X","X"],["X","0","0","0","0","0","0","X","X","X","X","X"],["X","0","0","X","0","0","0","0","X","X","X","X"],["X","0","0","0","0","0","0","0","Y","Y","1","X"],["X","0","0","0","0","0","0","0","Y","0","Y","X"],["X","0","0","0","X","0","Y","0","0","Y","Y","X"],["X","0","0","X","X","X","0","0","0","Y","Y","X"],["X","0","0","0","X","0","0","Y","0","0","Y","X"],["X","0","0","0","0","0","0","0","0","0","0","X"],["X","Y","0","Y","Y","0","0","0","0","0","0","X"],["X","0","0","0","0","0","Y","0","0","0","0","X"],["X","X","X","X","X","X","X","X","X","X","X","X"]];const popup=document.getElementById("popup"),xButton=document.getElementById("btnX"),overlay=document.getElementById("overlay"),resetBtn=document.getElementById("reset"),countBtn=document.getElementById("buttonCnt"),spanCounter=document.getElementById("counter"),show1=document.getElementById("show1"),show2=document.getElementById("show2"),imgMe=(xButton.addEventListener("click",()=>{popupOnOff()}),overlay.addEventListener("click",()=>{popupOnOff()}),resetBtn.addEventListener("click",()=>{resetCounter()}),countBtn.addEventListener("click",()=>{counterButtonClick()}),show1.addEventListener("click",()=>{showHide("part1")}),show2.addEventListener("click",()=>{showHide("part2")}),document.getElementById("imgMe"));imgMe.addEventListener("click",()=>{counterButtonClick()});let handleButtonDown=()=>{console.log("fail start ball2")},gameReset=()=>{console.log("fail start reset")},ball2button=document.getElementById("ball2button"),resetBtnBall2=(ball2button.addEventListener("click",handleButtonDown()),document.getElementById("resetBtnBall2")),counter=(resetBtnBall2.addEventListener("click",gameReset()),0);function initFunction(){counter=localStorage.getItem("count"),isNaN(counter)?(spanCounter.innerText=0,counter=0):spanCounter.innerText=counter}const popupOnOff=()=>{popup.classList.toggle("active"),overlay.classList.toggle("o-active"),spanCounter.innerText=counter},resetCounter=()=>{counter=0,spanCounter.innerText=counter,localStorage.clear(),resetBtn.classList.toggle("r-active")},counterButtonClick=()=>{counter++,localStorage.setItem("count",counter),5<counter&&1===resetBtn.classList.length&&resetBtn.classList.toggle("r-active"),popupOnOff()},showHide=t=>{let e=document.getElementById(t);"none"==e.style.display?e.style.display="block":e.style.display="none"};